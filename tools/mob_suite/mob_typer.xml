<tool id="mob_typer" name="MOB-Typer" version="1.4.1">
  <description>(Get the plasmid type and mobility given its sequence)</description>
  <requirements>
     <requirement type="package" version="1.4.1">mob_suite</requirement>
     <!--requirement type="package" version="2.7.1">blast</requirement-->
     <!--requirement type="package" version="2.0">mash</requirement-->
     <!--requirement type="package" version="1.5.5">circlator</requirement-->
  </requirements>   
  <command detect_errors="exit_code">
    ln -s ${input} ${input.name};
    mob_typer  --num_threads 16 --infile "${input.name}" --evalue ${adv_param.evalue} --min_ident ${adv_param.min_ident} --min_cov ${adv_param.min_cov} --outdir ".";
    ##/home/kbessonov/miniconda3/envs/general/bin/python /home/kbessonov/miniconda3/envs/general/bin/mob_typer  --num_threads 16 --infile "${input}" --outdir ".";
    ##pwd > screen.out; ls >>screen.out; echo ${__tool_directory__} >> screen.out; 
  </command>
  <inputs>
    <!--param name="num_lines" size="5" type="integer" value="1" label="Randomly select" help="lines"/-->
    <param name="input" type="data" format="fasta" label="Input" help="FASTA file with contig(s)"/>
    <section name="adv_param" title="Advanced parameters" expanded="False">
      <param name="evalue" label="Minimum e-value threshold for BLAST" type="float"  min="0.000000000000000000001" max="1" value="0.00001"/>
      <param name="min_ident" label="Minimum sequence identity for BLAST" type="float" min="1" max="100" value="80"/> 
      <param name="min_cov" label="Minimum percentage coverage of assembly contig by the plasmid reference database to be considered" type="float" min="1" max="100" value="65"/> 
    </section>  
  </inputs>
  <outputs>
    <!--data name="outfile1" format="tabular" from_work_dir="mobtyper_${input.name}_report.txt" label="${tool.name} report from ${input.name}"/-->
    <data name="outfile1" label="${tool.name}: Report from ${input.name}" format="tabular" hidden="false">
      <discover_datasets pattern=".+_report\.txt" visible="true" ext="tabular" assign_primary_output="true"/>
    </data>  
    <!--data name="outfile2" format="txt" from_work_dir="screen.out" label="${tool.name} screen output"/-->
  </outputs>
  <tests>
    <test>
        <param name="input" value="plasmid_476.fasta" ftype="fasta"/>
        <assert_stdout>
            <has_text text="JN253636"/> 
         </assert_stdout>
    </test>
  </tests>
  <help>

**Syntax**

This tool provides *in-silico* predictions on plasmid typing including identification of replicon, relaxase and mate-pair formation protein types. MOB-typer also predicts mobility of a plasmid (Conjugative, Mobilizable, Non-mobilizable). Do not include multiple unrelated plasmids in the input FASTA file as they will be treated as a single plasmid.

For more information please visit https://github.com/phac-nml/mob-suite/. 

-----

**Input:**

A FASTA file with a single or multiple contigs (e.g. plasmid.fasta):


**Output:**

Tab-delimited report listing identified plasmid(s) and their predicted mobility. Refer to https://github.com/phac-nml/mob-suite#mob-typer-report-file-format for the description of each column.


  </help>
  <citations>
    <citation type="bibtex">
  @misc{githubseqtk,
  author = {Robertson James, Nash John},
  year = {2018},
  title = {MOB-Suite: Software tools for clustering, reconstruction and typing of plasmids from draft assemblies.},
  publisher = {Microbiology Society Journals},
  journal = {Microbial Genomics},
  url = {http://mgen.microbiologyresearch.org/content/journal/mgen},
    }</citation>
  </citations>
</tool>
<!--(?P&lt;designation&gt;.+)   ${tool.name} report from ${input.name}-->
