<tool id="sourmash_compare" name="sourmash compare" version="0.1.0">
    <description>Compare multiple signatures</description>
    <requirements>
        <requirement type="package" version="2.0.0a2">sourmash</requirement>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <command><![CDATA[


    #for $sigs in  $signatures 
      ln -s "$sigs" "$sigs.name " && 
    #end for
    

    sourmash compare 
    
    #for $sigs in  $signatures
     "$sigs.name " 
    #end for

    $dna
    $protein

    --ksize "$ksizes"


    $ignore_abundance
    
    --csv '$csv'
    ]]></command>
    <inputs>
      <param type="data" multiple="true" name="signatures" format="json" label="Signatures"/>
      <param name="dna" type="boolean" falsevalue='--no-dna' truevalue='--dna' checked='True' label="build DNA signatures" help="build DNA signatures (default: True)"/>
      <param name="protein" type="boolean" falsevalue='--no-protein' truevalue='--protein' checked='False' label="build protein signatures" help="build protein signatures (default: False)"/>
      <param name="ignore_abundance" type="boolean" falsevalue='' truevalue='--ignore-abundance' checked='False' label="Do NOT use k-mer abundances if present" help=""/>
      <param help="A single k-mer size to be used. The default value is 31." label="K-mer size" name="ksizes" type="integer" value="31" />
      
    </inputs>
    <outputs>
      <data name="csv" format="csv" />
    </outputs>
    <tests>
      <test>
        <param name="signatures" value="genome2.fna.sig,genome1.fna.sig"/>
        <output name="csv" file="compare.csv"/>
      </test>
    </tests>
    <help><![CDATA[
Need help?
    ]]></help>
    <citations>
    </citations>
</tool>
